<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>レイトレ合宿４!? 参加作品について</title>
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="content">
<h1 class="title">レイトレ合宿４!? 参加作品について</h1>
<div id="table-of-contents">
<h2>&#30446;&#27425;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. 自己紹介</a></li>
<li><a href="#orgheadline2">2. 今回は何に取り組んだのか</a></li>
<li><a href="#orgheadline3">3. レイトレーサーの解説</a></li>
<li><a href="#orgheadline4">4. どんな成果を得たのか</a></li>
<li><a href="#orgheadline5">5. 今後どういうことに取り組むのか</a></li>
<li><a href="#orgheadline6">6. まとめ</a></li>
<li><a href="#orgheadline7">7. 参考資料</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> 自己紹介</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><b>ぼっちアプリプログラマ</b>

<ul class="org-ul">
<li>パソコン→家庭用ゲーム機→携帯サイト→iPhoneアプリ→専門学校講師×２</li>

<li>twitter: <a href="https://twitter.com/5mingame2">@5mingame2</a></li>

<li>facebook: <a href="https://www.facebook.com/5mingame2">5mingame2</a></li>

<li>GitHub: <a href="https://github.com/tek-nishi">tek-nishi</a></li>
</ul></li>

<li><b>好きなアーティストはファミコン</b></li>

<li><b>好きな食べ物はスガキヤ</b></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">2</span> 今回は何に取り組んだのか</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li><b>レイマーチングを利用したレイトレーサーをC++で実装しました</b>

<ul class="org-ul">
<li>GPUだけでレイトレースを実現する技術

<ul class="org-ul">
<li><p>
距離関数というものを用いてレイと物体の衝突を検出する 
</p>

<p>
<a href="http://www.demoscene.jp/?p=811">⇒ 参考サイト</a>
</p></li>

<li>従来のモデルデータはほぼ使わない</li>
</ul></li>

<li><b>実行環境でGPUが使えないと聞いたのでCPUで実装した</b></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3"><span class="section-number-2">3</span> レイトレーサーの解説</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>ネット上にある幾つかの解説サイトを読み進めながら実装を進めました

<ul class="org-ul">
<li>距離関数の使い方をなんとなしに把握した後は早かった</li>

<li>これまでの拙作レイトレーサーの経験も役立った</li>
</ul></li>

<li>特に <a href="http://syntopia.github.io/Fragmentarium/index.html">Fragmentarium</a> というアプリでの実装を参考にしました

<ul class="org-ul">
<li>GLSLでフラクタル図形をレンダリングする用途の超汎用的なアプリ</li>
</ul></li>

<li><b>利用したライブラリ</b>

<ul class="org-ul">
<li>picojson
<ul class="org-ul">
<li>JSONをC++から読み書きできるようにしてくれる</li>
</ul></li>

<li>glm
<ul class="org-ul">
<li>ベクトル・行列の計算をGLSLっぽく書けるようにしてくれる</li>
</ul></li>

<li>stb
<ul class="org-ul">
<li>画像データの読み書きを肩代わりしてくれる</li>
<li>HDR形式にも対応している!!</li>
</ul></li>
</ul></li>

<li><b>実装した仕様</b>

<ul class="org-ul">
<li>OpenGLっぽいマテリアルライティング</li>

<li>カメラ方向からのライティング</li>

<li><b>HDR画像を使った簡易イメージベースドライティング</b></li>

<li>鏡面反射</li>

<li><b>簡易アンビエントオクリュージョン</b></li>

<li><b>簡易ソフトシャドウ</b></li>

<li><b>簡易ブルーム効果</b></li>

<li>レンダリング結果の露出補正(トーンマッピング)</li>

<li>５分間でできるだけレイマーチして最終結果を書き出す処理</li>

<li><b>OpenMPによる並列処理</b></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4"><span class="section-number-2">4</span> どんな成果を得たのか</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>レイマーチングについての理解が深まった

<ul class="org-ul">
<li>複雑な物体との交差判定がごく単純な距離関数で実現できてしまう驚き</li>

<li>肝心の距離関数についてはよくわかりません</li>
</ul></li>

<li>フラクタル図形怖くない

<ul class="org-ul">
<li>なぜこういう描画結果が得られるのかはよくわかりません</li>
</ul></li>

<li>OpenMPは超手軽に使える!!

<ul class="org-ul">
<li>最初限の修正で導入できた</li>

<li>細かい指定に関してはよくわかりません</li>

<li>OSX:Xcodeのclangは対応してないのでgccを調達してくる必要がある(T^T)</li>

<li>Widnows:MSYS2+MinGW64</li>
</ul></li>

<li>定番ポストエフェクトの「ブルーム効果」を実装できた</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5"><span class="section-number-2">5</span> 今後どういうことに取り組むのか</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>今回実装した内容をGLSLで動くようにする

<ul class="org-ul">
<li>リアルタイムにぐりぐり動かしたい欲が高まっています</li>

<li><b>iOSで動くのかしら??</b> などと夢が広がりんぐ</li>
</ul></li>

<li>今回得られた知見を拙作アプリで活かす

<ul class="org-ul">
<li>従来の手法では達成できなかった表現ができそう</li>
</ul></li>

<li>GLSLだと <b>実行環境でコードをコンパイルできる</b> 強みがあるのに気づいた

<ul class="org-ul">
<li>様々な情報をシェーダーコードに埋め込んで静的に扱える</li>

<li>様々な実装を動的に組み合わせシェーダーでコンパイルさせる可能性</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">6</span> まとめ</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>レイマーチングにとても可能性を感じた</li>

<li>フラクタル図形の魅力に取り憑かれた</li>

<li>OpenMPの手軽さに感動した</li>

<li>５分は長い:D</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-2">
<h2 id="orgheadline7"><span class="section-number-2">7</span> 参考資料</h2>
<div class="outline-text-2" id="text-7">
<p>
今回のレイトレーサー製作にあたってとても参考になったサイトを紹介します。多謝!!
</p>

<ul class="org-ul">
<li><a href="http://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm">距離関数によるモデリング</a></li>
<li><a href="http://syntopia.github.io/Fragmentarium/index.html">Fragmentarium</a></li>
<li><a href="http://blog.hvidtfeldts.net/index.php/2011/06/distance-estimated-3d-fractals-part-i/">Fragmentariumの作者のサイト</a></li>
<li><a href="http://blog.hvidtfeldts.net/index.php/2015/01/path-tracing-3d-fractals/">フラクタル図形でパストレ</a></li>
<li><a href="https://www.flickr.com/groups/fragmentarium/">Fragmentariumでレンダリングした画像がたくさん</a></li>
<li><a href="https://wgld.org/d/glsl/g008.html">WebGL レイマーチ入門</a></li>
<li><a href="http://www.demoscene.jp/?p=811">全能感UP! GLSLで進めレイマーチング</a></li>
<li><a href="http://qiita.com/usagi/items/f34976a3d3011506ff7d">glm一巡り</a></li>
</ul>
</div>
</div>
</div>
</body>
</html>